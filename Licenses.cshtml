

@section styles {
    @*you can temporarily put your embedded styles here
        later you can move them to the Site.css file found in the Content folder *@

    <style>
    </style>

}
<div class="jumbotron">
    <h2 class="text-center">SA Driver Licenses Data By Postcode</h2>
</div>
<div class="row">
    <div class="col-5" id="tableData">
        <!-- Do NOT Edit this HTML -->
    </div>
    <div class="col-7">
        <div class="row">

            <div class="col-12" id="graphData">
                <p class="text-center">Select a suburb to continue...</p>
                <!-- Do NOT Edit this HTML -->
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>

        // write your JQuery or D3v5.9.x code here initially
        // 1. generate the table
        // 2. generate the graph
        // 3. generate the details table

        var $request = $.ajax({
            method: "get",
            url: "/api/sadriverswebapi",
            timeout: 5000
        })

        $request.done(function (response) {
            console.log(response);
            var postcodeTable = document.createElement('div');
            postcodeTable.id = "postcodeTable";

            // Create header row from div
            var headerRow = document.createElement('div');
            headerRow.classList.add('row');
            // Create Headers
            var postcodeHeader = document.createElement('thead');
            postcodeHeader.innerHTML = "<th>Postcode</th>";
            postcodeHeader.classList.add("col-md-2");

            var suburbHeader = document.createElement('thead');
            suburbHeader.innerHTML = "<th>Suburbs</th>";
            suburbHeader.classList.add("col-md-6");

            var yearsHeader = document.createElement('thead');
            yearsHeader.innerHTML = "<th>Years</th>";
            yearsHeader.classList.add("col-md-4");

            // Add headers to row
            headerRow.appendChild(postcodeHeader);
            headerRow.appendChild(suburbHeader);
            headerRow.appendChild(yearsHeader);
            postcodeTable.appendChild(headerRow);

            postcodeTable.classList.add("table-bordered");
            tableData.style = "overflow:scroll; max-height: 500px; ";
                        

            for (var i = 0; i < response.length; i++) {
                // Column 1 - Postcodes
                var tr1 = document.createElement('div');
                var td1 = document.createElement('div');
                tr1.classList.add("row");
                td1.classList.add("col-md-2");
                td1.style = "overflow:auto";
                tr1.style = "overflow:auto";
                var postcodeData = document.createTextNode(JSON.stringify(response[i].postcode));

                td1.appendChild(postcodeData);
                tr1.appendChild(td1);
                postcodeTable.appendChild(tr1);

                // Column 2 - Suburbs
                var td2 = document.createElement('div');
                td2.classList.add("col-md-6");
                td2.style = "overflow:auto";
                var suburbsData = document.createTextNode(JSON.stringify(response[i].suburbs));
                td2.appendChild(suburbsData);
                tr1.appendChild(td2);
                postcodeTable.appendChild(tr1);

                // Column 2 - Years
                var td3 = document.createElement('div');
                td3.classList.add("col-md-4");
                td3.style = "overflow:auto";
                var yearsBtn = document.createElement("button");
                yearsBtn.innerHTML = JSON.stringify(response[i].years);
                td3.appendChild(yearsBtn);
                tr1.appendChild(td3);
            }

            postcodeTable.appendChild(tr1);

            document.div; tableData.appendChild(postcodeTable);

        });




                                                                                                                                // add button click event to call your graph building function passing postcode + year as parameters




    </script>
}
